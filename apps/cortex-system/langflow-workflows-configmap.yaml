apiVersion: v1
kind: ConfigMap
metadata:
  name: langflow-workflows
  namespace: cortex-system
  labels:
    app: langflow
    component: workflows
data:
  01-k8s-health-monitor.json: |
    {
      "name": "Kubernetes Health Monitor",
      "description": "Real-time cluster health monitoring using Kubernetes MCP server",
      "data": {
        "nodes": [
          {
            "id": "mcp-1",
            "type": "MCPClient",
            "position": {"x": 250, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_get_cluster_info"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "claude-1",
            "type": "ChatAnthropic",
            "position": {"x": 500, "y": 100},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Analyze this Kubernetes cluster health data and provide a summary with any concerns:\n\n{mcp-1.output}"
                  }
                }
              }
            }
          },
          {
            "id": "output-1",
            "type": "ChatOutput",
            "position": {"x": 750, "y": 100},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{claude-1.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "mcp-1",
            "target": "claude-1",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "claude-1",
            "target": "output-1",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  02-mcp-orchestration-symphony.json: |
    {
      "name": "MCP Orchestration Symphony",
      "description": "Queries both Kubernetes and Proxmox MCP servers, merges data for unified infrastructure view",
      "data": {
        "nodes": [
          {
            "id": "k8s-mcp",
            "type": "MCPClient",
            "position": {"x": 100, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_list_nodes"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "proxmox-mcp",
            "type": "MCPClient",
            "position": {"x": 100, "y": 300},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://proxmox-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "proxmox_get_cluster_status"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "claude-merger",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 200},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Merge and analyze this infrastructure data from Kubernetes and Proxmox:\n\nKubernetes Data:\n{k8s-mcp.output}\n\nProxmox Data:\n{proxmox-mcp.output}\n\nProvide a unified view of resource utilization, health status, and any anomalies across both platforms."
                  }
                }
              }
            }
          },
          {
            "id": "output-merged",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 200},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{claude-merger.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "k8s-mcp",
            "target": "claude-merger",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "proxmox-mcp",
            "target": "claude-merger",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "claude-merger",
            "target": "output-merged",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  03-github-security-scanner.json: |
    {
      "name": "GitHub Security Scanner",
      "description": "Connects to GitHub Security MCP server, lists security tools and vulnerability scanners",
      "data": {
        "nodes": [
          {
            "id": "github-sec-mcp",
            "type": "MCPClient",
            "position": {"x": 250, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://github-security-mcp-server.cortex-system.svc.cluster.local:3003"
                  },
                  "method": {
                    "value": "list_security_tools"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "claude-analyzer",
            "type": "ChatAnthropic",
            "position": {"x": 500, "y": 100},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Analyze these GitHub security tools and provide:\n1. Available security tools and scanners\n2. Configuration recommendations\n3. Integration best practices\n\nSecurity Data:\n{github-sec-mcp.output}"
                  }
                }
              }
            }
          },
          {
            "id": "output-security",
            "type": "ChatOutput",
            "position": {"x": 750, "y": 100},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{claude-analyzer.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "github-sec-mcp",
            "target": "claude-analyzer",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "claude-analyzer",
            "target": "output-security",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  04-multi-agent-chat-router.json: |
    {
      "name": "Multi-Agent Chat Router",
      "description": "Routes user input to either Kubernetes expert or Security expert based on query intent",
      "data": {
        "nodes": [
          {
            "id": "classifier",
            "type": "ChatAnthropic",
            "position": {"x": 100, "y": 150},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Classify this query and respond with ONLY 'kubernetes' or 'security':\n\n{user_input}"
                  }
                }
              }
            }
          },
          {
            "id": "k8s-expert",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 50},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "You are a Kubernetes expert. Answer this question:\n\n{user_input}"
                  }
                }
              }
            }
          },
          {
            "id": "security-expert",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 250},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "You are a Security expert. Answer this question:\n\n{user_input}"
                  }
                }
              }
            }
          },
          {
            "id": "output-routed",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 150},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{classifier.classification == 'kubernetes' ? k8s-expert.text : security-expert.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "classifier",
            "target": "k8s-expert",
            "sourceHandle": "text",
            "targetHandle": "input"
          },
          {
            "source": "classifier",
            "target": "security-expert",
            "sourceHandle": "text",
            "targetHandle": "input"
          },
          {
            "source": "k8s-expert",
            "target": "output-routed",
            "sourceHandle": "text",
            "targetHandle": "input"
          },
          {
            "source": "security-expert",
            "target": "output-routed",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  05-infrastructure-alert-analyzer.json: |
    {
      "name": "Infrastructure Alert Analyzer",
      "description": "Processes and categorizes infrastructure alerts from Kubernetes and infrastructure systems",
      "data": {
        "nodes": [
          {
            "id": "k8s-alerts",
            "type": "MCPClient",
            "position": {"x": 100, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_get_events"
                  },
                  "params": {
                    "value": "{\"namespace\": \"cortex-system\"}"
                  }
                }
              }
            }
          },
          {
            "id": "alert-processor",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 100},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Analyze and categorize these infrastructure alerts:\n\n{k8s-alerts.output}\n\nProvide:\n1. Critical alerts (immediate action required)\n2. Warning alerts (review soon)\n3. Informational events\n4. Recommended actions for each"
                  }
                }
              }
            }
          },
          {
            "id": "output-alerts",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 100},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{alert-processor.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "k8s-alerts",
            "target": "alert-processor",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "alert-processor",
            "target": "output-alerts",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  06-cost-tracker-reporter.json: |
    {
      "name": "Cost Tracker Reporter",
      "description": "Daily cost analysis and reporting for infrastructure and services",
      "data": {
        "nodes": [
          {
            "id": "k8s-resources",
            "type": "MCPClient",
            "position": {"x": 100, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_list_pods_with_resources"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "proxmox-resources",
            "type": "MCPClient",
            "position": {"x": 100, "y": 300},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://proxmox-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "proxmox_get_resource_usage"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "cost-analyzer",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 200},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Analyze daily costs based on resource usage:\n\nKubernetes Resources:\n{k8s-resources.output}\n\nProxmox Resources:\n{proxmox-resources.output}\n\nProvide:\n1. Daily cost breakdown by service/namespace\n2. Highest cost consumers\n3. Optimization recommendations\n4. Projected monthly costs"
                  }
                }
              }
            }
          },
          {
            "id": "output-costs",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 200},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{cost-analyzer.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "k8s-resources",
            "target": "cost-analyzer",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "proxmox-resources",
            "target": "cost-analyzer",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "cost-analyzer",
            "target": "output-costs",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  07-deployment-validator.json: |
    {
      "name": "Deployment Validator",
      "description": "Pre-deployment safety checks and validation against security policies",
      "data": {
        "nodes": [
          {
            "id": "deployment-input",
            "type": "ChatInput",
            "position": {"x": 50, "y": 150},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "Deployment manifest YAML"
                  }
                }
              }
            }
          },
          {
            "id": "k8s-validator",
            "type": "MCPClient",
            "position": {"x": 250, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_validate_manifest"
                  },
                  "params": {
                    "value": "{\"manifest\": \"{deployment-input.value}\"}"
                  }
                }
              }
            }
          },
          {
            "id": "security-check",
            "type": "MCPClient",
            "position": {"x": 250, "y": 300},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://github-security-mcp-server.cortex-system.svc.cluster.local:3003"
                  },
                  "method": {
                    "value": "check_security_policies"
                  },
                  "params": {
                    "value": "{\"manifest\": \"{deployment-input.value}\"}"
                  }
                }
              }
            }
          },
          {
            "id": "validation-analyzer",
            "type": "ChatAnthropic",
            "position": {"x": 500, "y": 200},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Review deployment validation results:\n\nKubernetes Validation:\n{k8s-validator.output}\n\nSecurity Policy Check:\n{security-check.output}\n\nProvide:\n1. SAFE/UNSAFE status\n2. Issues found\n3. Required fixes before deployment\n4. Compliance status"
                  }
                }
              }
            }
          },
          {
            "id": "output-validation",
            "type": "ChatOutput",
            "position": {"x": 750, "y": 200},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{validation-analyzer.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "deployment-input",
            "target": "k8s-validator",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "deployment-input",
            "target": "security-check",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "k8s-validator",
            "target": "validation-analyzer",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "security-check",
            "target": "validation-analyzer",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "validation-analyzer",
            "target": "output-validation",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  08-log-pattern-analyzer.json: |
    {
      "name": "Log Pattern Analyzer",
      "description": "Finds anomalies and patterns in application and infrastructure logs",
      "data": {
        "nodes": [
          {
            "id": "log-fetcher",
            "type": "MCPClient",
            "position": {"x": 100, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_get_logs"
                  },
                  "params": {
                    "value": "{\"namespace\": \"cortex-system\", \"tail\": 500}"
                  }
                }
              }
            }
          },
          {
            "id": "pattern-detector",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 100},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Analyze these logs for patterns and anomalies:\n\n{log-fetcher.output}\n\nIdentify:\n1. Error patterns and frequency\n2. Performance anomalies\n3. Suspicious activity\n4. Recommended actions\n5. Timeline of significant events"
                  }
                }
              }
            }
          },
          {
            "id": "output-logs",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 100},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{pattern-detector.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "log-fetcher",
            "target": "pattern-detector",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "pattern-detector",
            "target": "output-logs",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  09-service-health-dashboard.json: |
    {
      "name": "Service Health Dashboard",
      "description": "Real-time service status aggregation across Kubernetes, Proxmox, and network infrastructure",
      "data": {
        "nodes": [
          {
            "id": "k8s-health",
            "type": "MCPClient",
            "position": {"x": 100, "y": 50},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_get_service_status"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "proxmox-health",
            "type": "MCPClient",
            "position": {"x": 100, "y": 200},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://proxmox-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "proxmox_get_node_status"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "network-health",
            "type": "MCPClient",
            "position": {"x": 100, "y": 350},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://unifi-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "unifi_get_network_status"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "dashboard-aggregator",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 200},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Aggregate infrastructure health into a comprehensive dashboard:\n\nKubernetes Services:\n{k8s-health.output}\n\nProxmox Nodes:\n{proxmox-health.output}\n\nNetwork Infrastructure:\n{network-health.output}\n\nCreate a unified dashboard view with:\n1. Overall health status (GREEN/YELLOW/RED)\n2. Component health breakdown\n3. Active alerts and issues\n4. Trend analysis (improving/stable/degrading)\n5. Recommended actions"
                  }
                }
              }
            }
          },
          {
            "id": "output-dashboard",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 200},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{dashboard-aggregator.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "k8s-health",
            "target": "dashboard-aggregator",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "proxmox-health",
            "target": "dashboard-aggregator",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "network-health",
            "target": "dashboard-aggregator",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "dashboard-aggregator",
            "target": "output-dashboard",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  10-auto-documentation-generator.json: |
    {
      "name": "Auto Documentation Generator",
      "description": "Automatically generates documentation from deployed services and their configurations",
      "data": {
        "nodes": [
          {
            "id": "k8s-apps",
            "type": "MCPClient",
            "position": {"x": 100, "y": 100},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_list_deployments"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "k8s-services",
            "type": "MCPClient",
            "position": {"x": 100, "y": 250},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_list_services"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "doc-generator",
            "type": "ChatAnthropic",
            "position": {"x": 350, "y": 175},
            "data": {
              "node": {
                "template": {
                  "model_name": {
                    "value": "claude-sonnet-4-20250514"
                  },
                  "anthropic_api_key": {
                    "value": "{{ANTHROPIC_API_KEY}}"
                  },
                  "input_value": {
                    "value": "Generate comprehensive documentation from the deployed infrastructure:\n\nDeployments:\n{k8s-apps.output}\n\nServices:\n{k8s-services.output}\n\nCreate documentation including:\n1. Architecture diagram (ASCII)\n2. Service descriptions and purposes\n3. API endpoints and access methods\n4. Dependencies and relationships\n5. Configuration and environment variables\n6. Deployment details (replicas, resources, etc.)\n7. Health checks and monitoring endpoints\n8. Troubleshooting guide\n9. Update procedures"
                  }
                }
              }
            }
          },
          {
            "id": "output-docs",
            "type": "ChatOutput",
            "position": {"x": 600, "y": 175},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{doc-generator.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "k8s-apps",
            "target": "doc-generator",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "k8s-services",
            "target": "doc-generator",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "doc-generator",
            "target": "output-docs",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
  11-cortex-daily-brief.json: |
    {
      "name": "Cortex Daily Brief - Hello Response",
      "description": "When user says 'hello', provide complete status report with weather, infrastructure, YouTube learnings, and daily insights",
      "data": {
        "nodes": [
          {
            "id": "chatInput",
            "type": "ChatInput",
            "position": {"x": 100, "y": 300},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "hello"
                  }
                }
              }
            }
          },
          {
            "id": "weatherAPI",
            "type": "APIRequest",
            "position": {"x": 400, "y": 50},
            "data": {
              "node": {
                "template": {
                  "url": {"value": "https://wttr.in/Duluth,MN?format=j1"},
                  "method": {"value": "GET"},
                  "headers": {"value": "{}"}
                }
              }
            }
          },
          {
            "id": "k8sStatus",
            "type": "MCPClient",
            "position": {"x": 400, "y": 150},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
                  },
                  "method": {
                    "value": "k8s_get_cluster_info"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "proxmoxStatus",
            "type": "MCPClient",
            "position": {"x": 400, "y": 250},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://proxmox-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "proxmox_get_cluster_status"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "sandfly",
            "type": "MCPClient",
            "position": {"x": 400, "y": 350},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://sandfly-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "sandfly_get_summary"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "network",
            "type": "MCPClient",
            "position": {"x": 400, "y": 450},
            "data": {
              "node": {
                "template": {
                  "server_url": {
                    "value": "http://unifi-mcp-server.cortex-system.svc.cluster.local:3000"
                  },
                  "method": {
                    "value": "unifi_get_network_status"
                  },
                  "params": {
                    "value": "{}"
                  }
                }
              }
            }
          },
          {
            "id": "youtubeLearnings",
            "type": "APIRequest",
            "position": {"x": 400, "y": 550},
            "data": {
              "node": {
                "template": {
                  "url": {"value": "http://youtube-ingestion.cortex.svc.cluster.local:8080/api/learnings/summary"},
                  "method": {"value": "GET"},
                  "headers": {"value": "{\"Content-Type\": \"application/json\"}"}
                }
              }
            }
          },
          {
            "id": "mergeData",
            "type": "MergeData",
            "position": {"x": 700, "y": 300},
            "data": {}
          },
          {
            "id": "claude",
            "type": "ChatAnthropic",
            "position": {"x": 1000, "y": 300},
            "data": {
              "node": {
                "template": {
                  "model_name": {"value": "claude-sonnet-4-20250514"},
                  "anthropic_api_key": {"value": "{{ANTHROPIC_API_KEY}}"},
                  "input_value": {"value": "You are Cortex, an AI infrastructure assistant. The user just said hello. Create a friendly, comprehensive daily brief including:\n\n1. üëã Greeting with current time\n2. üå§Ô∏è Weather in Duluth, MN: {weatherAPI.output}\n3. ‚ò∏Ô∏è K3s cluster status: {k8sStatus.output}\n4. üñ•Ô∏è Proxmox infrastructure: {proxmoxStatus.output}\n5. üåê Network status (UniFi): {network.output}\n6. üîí Security posture (Sandfly): {sandfly.output}\n7. üìö What I learned today from YouTube: {youtubeLearnings.output}\n   - Summarize the most interesting insights from recent video summaries\n   - Mention specific technologies, concepts, or best practices\n   - Keep it concise but informative\n8. üéØ My plans for today:\n   - Monitor infrastructure health\n   - Process queued YouTube videos\n   - Respond to alerts\n   - Optimize resource usage\n\nBe warm, professional, and slightly playful. Format nicely with emojis. Keep the YouTube learnings section engaging - highlight actionable insights or cool technologies mentioned in the videos."}
                }
              }
            }
          },
          {
            "id": "output",
            "type": "ChatOutput",
            "position": {"x": 1300, "y": 300},
            "data": {
              "node": {
                "template": {
                  "input_value": {
                    "value": "{claude.text}"
                  }
                }
              }
            }
          }
        ],
        "edges": [
          {
            "source": "chatInput",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "weatherAPI",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "k8sStatus",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "proxmoxStatus",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "sandfly",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "network",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "youtubeLearnings",
            "target": "mergeData",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "mergeData",
            "target": "claude",
            "sourceHandle": "output",
            "targetHandle": "input"
          },
          {
            "source": "claude",
            "target": "output",
            "sourceHandle": "text",
            "targetHandle": "input"
          }
        ]
      }
    }
