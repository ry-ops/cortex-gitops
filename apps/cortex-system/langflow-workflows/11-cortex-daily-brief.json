{
  "name": "Cortex Daily Brief - Hello Response",
  "description": "When user says 'hello', provide complete status report with weather, infrastructure, YouTube learnings, and daily insights",
  "data": {
    "nodes": [
      {
        "id": "chatInput",
        "type": "ChatInput",
        "position": {"x": 100, "y": 300},
        "data": {
          "node": {
            "template": {
              "input_value": {
                "value": "hello"
              }
            }
          }
        }
      },
      {
        "id": "weatherAPI",
        "type": "APIRequest",
        "position": {"x": 400, "y": 50},
        "data": {
          "node": {
            "template": {
              "url": {"value": "https://wttr.in/Duluth,MN?format=j1"},
              "method": {"value": "GET"},
              "headers": {"value": "{}"}
            }
          }
        }
      },
      {
        "id": "k8sStatus",
        "type": "MCPClient",
        "position": {"x": 400, "y": 150},
        "data": {
          "node": {
            "template": {
              "server_url": {
                "value": "http://kubernetes-mcp-server.cortex-system.svc.cluster.local:3001"
              },
              "method": {
                "value": "k8s_get_cluster_info"
              },
              "params": {
                "value": "{}"
              }
            }
          }
        }
      },
      {
        "id": "proxmoxStatus",
        "type": "MCPClient",
        "position": {"x": 400, "y": 250},
        "data": {
          "node": {
            "template": {
              "server_url": {
                "value": "http://proxmox-mcp-server.cortex-system.svc.cluster.local:3000"
              },
              "method": {
                "value": "proxmox_get_cluster_status"
              },
              "params": {
                "value": "{}"
              }
            }
          }
        }
      },
      {
        "id": "sandfly",
        "type": "MCPClient",
        "position": {"x": 400, "y": 350},
        "data": {
          "node": {
            "template": {
              "server_url": {
                "value": "http://sandfly-mcp-server.cortex-system.svc.cluster.local:3000"
              },
              "method": {
                "value": "sandfly_get_summary"
              },
              "params": {
                "value": "{}"
              }
            }
          }
        }
      },
      {
        "id": "network",
        "type": "MCPClient",
        "position": {"x": 400, "y": 450},
        "data": {
          "node": {
            "template": {
              "server_url": {
                "value": "http://unifi-mcp-server.cortex-system.svc.cluster.local:3000"
              },
              "method": {
                "value": "unifi_get_network_status"
              },
              "params": {
                "value": "{}"
              }
            }
          }
        }
      },
      {
        "id": "youtubeLearnings",
        "type": "APIRequest",
        "position": {"x": 400, "y": 550},
        "data": {
          "node": {
            "template": {
              "url": {"value": "http://youtube-ingestion.cortex.svc.cluster.local:8080/api/learnings/summary"},
              "method": {"value": "GET"},
              "headers": {"value": "{\"Content-Type\": \"application/json\"}"}
            }
          }
        }
      },
      {
        "id": "mergeData",
        "type": "MergeData",
        "position": {"x": 700, "y": 300},
        "data": {}
      },
      {
        "id": "claude",
        "type": "ChatAnthropic",
        "position": {"x": 1000, "y": 300},
        "data": {
          "node": {
            "template": {
              "model_name": {"value": "claude-sonnet-4-20250514"},
              "anthropic_api_key": {"value": "{{ANTHROPIC_API_KEY}}"},
              "input_value": {"value": "You are Cortex, an AI infrastructure assistant. The user just said hello. Create a friendly, comprehensive daily brief including:\n\n1. üëã Greeting with current time\n2. üå§Ô∏è Weather in Duluth, MN: {weatherAPI.output}\n3. ‚ò∏Ô∏è K3s cluster status: {k8sStatus.output}\n4. üñ•Ô∏è Proxmox infrastructure: {proxmoxStatus.output}\n5. üåê Network status (UniFi): {network.output}\n6. üîí Security posture (Sandfly): {sandfly.output}\n7. üìö What I learned today from YouTube: {youtubeLearnings.output}\n   - Summarize the most interesting insights from recent video summaries\n   - Mention specific technologies, concepts, or best practices\n   - Keep it concise but informative\n8. üéØ My plans for today:\n   - Monitor infrastructure health\n   - Process queued YouTube videos\n   - Respond to alerts\n   - Optimize resource usage\n\nBe warm, professional, and slightly playful. Format nicely with emojis. Keep the YouTube learnings section engaging - highlight actionable insights or cool technologies mentioned in the videos."}
            }
          }
        }
      },
      {
        "id": "output",
        "type": "ChatOutput",
        "position": {"x": 1300, "y": 300},
        "data": {
          "node": {
            "template": {
              "input_value": {
                "value": "{claude.text}"
              }
            }
          }
        }
      }
    ],
    "edges": [
      {
        "source": "chatInput",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "weatherAPI",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "k8sStatus",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "proxmoxStatus",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "sandfly",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "network",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "youtubeLearnings",
        "target": "mergeData",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "mergeData",
        "target": "claude",
        "sourceHandle": "output",
        "targetHandle": "input"
      },
      {
        "source": "claude",
        "target": "output",
        "sourceHandle": "text",
        "targetHandle": "input"
      }
    ]
  }
}
