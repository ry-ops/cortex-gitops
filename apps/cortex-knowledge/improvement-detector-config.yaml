apiVersion: v1
kind: ConfigMap
metadata:
  name: improvement-detector-config
  namespace: cortex-knowledge
data:
  config.yaml: |
    detection:
      # Improvement detection strategies
      strategies:
        - name: pattern-analysis
          enabled: true
          description: "Detect recurring issues that need systematic fixes"
          threshold: 3  # Number of occurrences to trigger

        - name: performance-analysis
          enabled: true
          description: "Identify performance bottlenecks and optimization opportunities"
          metrics:
            - cpu_usage
            - memory_usage
            - response_time
            - error_rate

        - name: knowledge-gap-analysis
          enabled: true
          description: "Identify areas with insufficient documentation or knowledge"
          min_knowledge_items: 2

        - name: efficiency-analysis
          enabled: true
          description: "Find inefficient processes or redundant operations"

        - name: trend-analysis
          enabled: true
          description: "Detect negative trends requiring intervention"
          lookback_days: 7

      # Improvement categories
      categories:
        - name: automation
          priority: high
          description: "Opportunities to automate manual processes"

        - name: optimization
          priority: medium
          description: "Performance and resource optimization"

        - name: reliability
          priority: high
          description: "Improvements to system reliability"

        - name: documentation
          priority: low
          description: "Documentation improvements"

        - name: security
          priority: critical
          description: "Security enhancements"

      # Scoring criteria
      scoring:
        impact:
          critical: 10
          high: 7
          medium: 5
          low: 3

        effort:
          low: 1
          medium: 3
          high: 5
          very_high: 8

        # ROI = impact / effort
        min_roi: 1.5

      # Output configuration
      output:
        create_github_issues: true
        notify_masters: true
        update_dashboard: true
        min_priority: medium

    mongodb:
      host: knowledge-mongodb
      port: 27017
      database: cortex_knowledge

    neo4j:
      uri: bolt://knowledge-graph:7687
      database: cortex

    prometheus:
      url: http://kube-prometheus-stack-prometheus.monitoring:9090
